<ion-header>
    <ion-navbar>
        <ion-title>{{modaltype[2]}} {{today | date: 'dd-MM-yyyy'}}</ion-title>
        <ion-buttons end>
            <button ion-button (click)="closeModal()">Close</button>
        </ion-buttons>
        <ion-buttons end>
            <!-- <button ion-button icon-only (click)="presentPopover($event)">
              <ion-icon name="more"></ion-icon>
            </button> -->
            <button ion-button (click)="openAttendance()">
                <ion-icon style="font-size: 25px;" name="contacts"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
    <ion-toolbar no-border-top>
        <ion-segment [(ngModel)]="pet" (ionChange)="segmentChanged($event)">
            <ion-segment-button value="pending" style="font-size: 13px; color:#fff;">
                Open
            </ion-segment-button>
            <ion-segment-button value="confirm" style="font-size: 13px; color:#fff;">
                Completed
            </ion-segment-button>
            <ion-segment-button value="feedback" style="font-size: 13px; color:#fff;">
                Feedback
            </ion-segment-button>
        </ion-segment>        
    </ion-toolbar>
    <ion-toolbar no-border-top>        
        <div>
            <ion-searchbar [(ngModel)]="searchData.search_value" (ionInput)="SearchTaskDetail()">
            </ion-searchbar>
        </div>
    </ion-toolbar>
</ion-header>

<ion-content padding
    style="background-repeat: no-repeat; background-size: cover; background-position: center; background-attachment: fixed;">

    <div>

        <div [ngSwitch]="pet">
            <ion-list *ngSwitchCase="'pending'">

                <!-- <ion-card (click)="openModal(type = 'Activity')">
                    <ion-item>
                      <ion-icon name="paper" item-start large></ion-icon>
                      <p style="white-space: normal; font-size: 15px;">Task
                      </p>
                    </ion-item>  
                </ion-card> -->

                <div class="col-md-12">

                    <div class="accordion" id="service_and_demand_modal">
                        <div *ngFor="let item of tasksearchdetails; index as i;">

                            <ion-list style="margin: 1px 0 0px;">
                                <ion-item-sliding>
                                    <ion-item id="headingOne" class="btn btn-link blc collapsed" data-toggle="collapse"
                                        (click)=showUndoBtn(i)>

                                        <div *ngIf="item.STATUS == 4">
                                            <h2 style="color:#7ed670">{{ item.TITLE}} - {{item.SEQ_TEXT}}</h2>
                                            <p>{{item.CREATED_BY_NAME}}</p>
                                            <p>{{item.CREATED_ON | date:'dd-MMM-yyyy,hh:mm:ss a'}}</p>
                                            <p>{{item.COMPLAINT_DESCRIPTION}}</p>
                                            <p *ngIf="item.TRANS_TYPE=='CALOG' && item.TRANS_ID > 0"> Call Log ID: {{item.TRANS_ID}}</p>
                                            <p>{{item.COMPLAINT_DESCRIPTION}}</p>
                                            <p  *ngIf="item.PARTNER_NAME != null" style="white-space: normal;">Partners: {{item.PARTNER_NAME}}</p>                                           
                                            <p *ngIf="item.UNIT_DESCRIPTION != null" style="white-space: normal;">Units: {{item.UNIT_DESCRIPTION}}</p>
                                            <p style="color:#7ed670">{{item.STATUS_NAME}}</p> 
                                        </div>
                                        <div *ngIf="item.STATUS != 4 && item.OVERDUE_TASK_COUNT == 0">
                                            <h2>{{ item.TITLE}} - {{item.SEQ_TEXT}}</h2>
                                            <p>{{item.CREATED_BY_NAME}}</p>
                                            <p>{{item.CREATED_ON | date:'dd-MMM-yyyy,hh:mm:ss a'}}</p>
                                            <p>{{item.COMPLAINT_DESCRIPTION}}</p>
                                            <p *ngIf="item.TRANS_TYPE=='CALOG' && item.TRANS_ID > 0"> Call Log ID:{{item.TRANS_ID}}</p>
                                            <p *ngIf="item.PARTNER_NAME != null" style="white-space: normal;">Partners: {{item.PARTNER_NAME}}</p>                                         
                                            <p *ngIf="item.UNIT_DESCRIPTION != null" style="white-space: normal;">Units: {{item.UNIT_DESCRIPTION}}</p>
                                            <p style="color:red">{{item.STATUS_NAME}}</p> 
                                        </div>

                                        <div *ngIf="item.OVERDUE_TASK_COUNT == 1">
                                            <h2 style="color:#ffa500">{{ item.TITLE}} - {{item.SEQ_TEXT}}</h2>
                                            <p >{{item.CREATED_BY_NAME}}</p>
                                            <p >{{item.CREATED_ON | date:'dd-MMM-yyyy,hh:mm:ss a'}}</p>
                                            <p >{{item.COMPLAINT_DESCRIPTION}}</p>
                                            <p  *ngIf="item.TRANS_TYPE=='CALOG' && item.TRANS_ID > 0"> Call Log ID: {{item.TRANS_ID}}</p>
                                            <p  *ngIf="item.PARTNER_NAME != null" style="white-space: normal;">Partners: {{item.PARTNER_NAME}}</p>
                                            <p *ngIf="item.UNIT_DESCRIPTION != null" style="white-space: normal;">Units: {{item.UNIT_DESCRIPTION}}</p>
                                            <p style="color:#ffa500">{{item.STATUS_NAME}}</p> 
                                        </div>

                                        <button ion-button clear item-end class="btn btn-link blc collapsed"
                                            data-toggle="collapse" [attr.data-target]="'#' + i"
                                            aria-expanded="true/false" [attr.aria-controls]="i">
                                            <ion-icon style="font-size: x-large;" name="arrow-dropdown"></ion-icon>
                                        </button>
                                    </ion-item>

                                    <!-- <ion-item-options side="left">
                                        <div *ngIf="item.TASK_TO_PIN == 0">
                                            <button ion-button style="font-size: 12px;"
                                                (click)="pintotask(item.TASK_ID,item.TASK_TO_PIN,type='Pin')"><img
                                                    src="assets/imgs/pin.png" class="icon-btn" /> Pin</button>
                                        </div>
                                        <div *ngIf="item.TASK_TO_PIN > 0">
                                            <button ion-button style="font-size: 12px;"
                                                (click)="pintotask(item.TASK_ID,item.TASK_TO_PIN,type='Unpin')"><img
                                                    src="assets/imgs/unpin.png" class="icon-btn" /> Unpin</button>
                                        </div>
                                    </ion-item-options> -->
                                </ion-item-sliding>
                            </ion-list>

                            <div [attr.id]="'undoBtn'+i" *ngIf="showBtn===i">
                                <div class="card-body card-bodynew">
                                    <table role="table" class="alltaskmodal">
                                        <thead role="rowgroup">
                                            <tr role="row">
                                                <th role="columnheader">Title</th>
                                                <th role="columnheader">Assignee </th>
                                                <th role="columnheader">Unit</th>
                                                <th role="columnheader">Start Date</th>
                                                <th role="columnheader">End Date</th>
                                                <th role="columnheader">Task Time</th>
                                                <th role="columnheader">Complaint</th>
                                                <th role="columnheader">Created Date</th>
                                                <th role="columnheader">Status</th>
                                                <th role="columnheader">Comments</th>
                                            </tr>
                                        </thead>
                                        <tbody role="rowgroup">
                                            <tr role="row">
                                                <td role="cell">{{item.TITLE}}</td>
                                                <td role="cell">{{item.ASSIGNED_TO}}</td>
                                                <td role="cell">{{item.UNIT_DESCRIPTION}}</td>
                                                <td role="cell">{{item.TASK_START_TIME |date:'dd-MMM-yyyy,hh:mm:ss a'}}
                                                </td>
                                                <td role="cell">{{item.TASK_END_TIME |date:'dd-MMM-yyyy,hh:mm:ss a'}}
                                                </td>
                                                <td role="cell">{{item.TASK_TIME}}</td>
                                                <td role="cell">{{item.COMPLAINT_DESCRIPTION}}</td>
                                                <td role="cell">{{item.CREATED_ON | date:'dd-MMM-yyyy,hh:mm a'}}</td>
                                                <td role="cell">{{item.STATUS_NAME}}</td>
                                                <td role="cell">
                                                    <span>
                                                        <span [innerHTML]="item.COMMENTS"
                                                            style='white-space: pre-line;'></span><br>
                                                        <span style="float: right; color: red">{{item.CMT_CREATED_BY}}
                                                            {{item.CMT_CREATED_ON | date:'dd-MMM-yyyy,HH:mm a'}} </span>
                                                    </span>
                                                </td>
                                                <td role="cell" style="padding-left: 0% !important;">

                                                    <span
                                                        *ngIf="(item.ASSIGNED_USER_INFO_ID == user.UserInfoId) && (item.STATUS <=2) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID,type='start')"
                                                            color="primary"><i class="fa fa-play" aria-hidden="true"
                                                                style="font-size: 11px;"> Start</i>
                                                        </button>
                                                    </span>
                                                    <span
                                                        *ngIf="(item.ASSIGNED_USER_INFO_ID == 0) && (item.STATUS <=2) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID,type='start')"
                                                            color="primary"><i class="fa fa-play" aria-hidden="true"
                                                                style="font-size: 11px;"> Start</i>
                                                        </button>
                                                    </span>

                                                    
                                                    <span *ngIf="(item.STATUS ==3) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID,type='pause')"
                                                            color="success">
                                                            <i class="fa fa-pause" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Pause</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="(item.STATUS ==3) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID,type='complete')"
                                                            color="success">
                                                            <i class="fa fa-check" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Completed</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.PARANT_COUNT > 0">
                                                        <button ion-button
                                                            (click)="openhierachy(item.SEQ_TEXT,item.TITLE)"
                                                            color="success">
                                                            <i class="fa fa-sitemap" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Task Hierarchy</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.ACTIVITY_TASK_COUNT > 0">
                                                        <button ion-button (click)="markasread(item.TASK_ID)"
                                                            color="success">
                                                            <i class="fa fa-envelope-open-o"
                                                                style="font-size: 11px;width: 85px;"
                                                                aria-hidden="true">Mark as
                                                                Read</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.TASK_FILE_COUNT == 0">
                                                        <button ion-button (click)="openModalTaskUpload(item.TASK_ID)"
                                                            color="secondary">
                                                            <i class="fa fa-paperclip" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Attach</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.TASK_FILE_COUNT > 0">
                                                        <button ion-button (click)="openModalTaskUpload(item.TASK_ID)"
                                                            color="success">
                                                            <span style="margin-right: 15px; font-size: 11px;">
                                                                <img src="assets/imgs/attach.png" class="icon-btn"
                                                                    style="max-width: 45% !important" /> Attach
                                                            </span>
                                                        </button>
                                                    </span>

                                                    <span>
                                                        <button ion-button
                                                            (click)="opentaskcommentModal(item.TASK_ID,i)"
                                                            color="secondary"><i class="fa fa-comments"
                                                                aria-hidden="true" style="font-size: 11px;">
                                                                Comments</i>
                                                        </button>
                                                    </span>
                                                    
                                                    <!-- <span *ngIf="(item.STATUS ==4) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID, type='reopen')"
                                                            color="secondary"><i class="fa fa-undo" aria-hidden="true"
                                                                style="font-size: 11px;"> Reopen</i>
                                                        </button>
                                                    </span> -->

                                                    <span
                                                        *ngIf="(item.ASSIGNED_USER_INFO_ID != user.UserInfoId) && (item.STATUS <=2) && (item.REFTASK == 0)">
                                                        <button ion-button (click)="delete_task(item.TASK_ID)"
                                                            color="danger">
                                                            <i class="fa fa-trash" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Delete</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.FLAG_COUNT == 0">
                                                        <button ion-button (click)="UpdateimportantTask(item.TASK_ID,1)"
                                                            color="secondary">
                                                            <ion-icon name="flag"></ion-icon>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.FLAG_COUNT == 1">
                                                        <button ion-button (click)="UpdateimportantTask(item.TASK_ID,0)"
                                                            color="danger">
                                                            <ion-icon name="flag"></ion-icon>
                                                        </button>
                                                    </span>

                                                    <span
                                                        *ngIf="item.THUBMSUP != 1 && (item.CREATED_BY == user.UserInfoId || item.REFERAL_USER_ID == 1)">
                                                        <button ion-button
                                                            (click)="UpdatethubmsTask(item.TASK_ID,1,item.ASSIGNED_USER_INFO_ID,item.CREATED_BY)"
                                                            color="secondary">
                                                            <ion-icon name="thumbs-up"></ion-icon>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.REFTASK == 1">
                                                        <button ion-button (click)="openModalRemoveTask(item.TASK_ID)"
                                                            color="secondary">
                                                            <i class="fa fa-minus-circle" aria-hidden="true"
                                                                style="font-size: 11px;"> Remove Referal</i>
                                                        </button>
                                                    </span>

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </ion-list>

            <ion-list *ngSwitchCase="'confirm'">

                <!-- <ion-card (click)="openModal(type = 'ResourceManagerCompletedtask')">
                    <ion-item>
                      <ion-icon name="paper" item-start large></ion-icon>
                      <p style="white-space: normal; font-size: 15px;">Task
                      </p>
                    </ion-item>  
                </ion-card> -->

                <div class="col-md-12">

                    <div class="accordion" id="service_and_demand_modal">
                        <div *ngFor="let item of tasksearchdetails; index as i;">

                            <ion-list style="margin: 1px 0 0px;">
                                <ion-item-sliding>
                                    <ion-item id="headingOne" class="btn btn-link blc collapsed" data-toggle="collapse"
                                        (click)=showUndoBtn(i)>

                                        <div *ngIf="item.STATUS == 4">
                                            <h2 style="color:#7ed670">{{ item.TITLE}} - {{item.SEQ_TEXT}}</h2>
                                            <p style="color:#7ed670">{{item.CREATED_BY_NAME}}</p>
                                            <p style="color:#7ed670" *ngIf="item.TRANS_TYPE=='CALOG' && item.TRANS_ID > 0"> Call Log ID:{{item.TRANS_ID}}</p>
                                            <p style="color:#7ed670"> Start Date: {{item.START_TIME}}</p>
                                            <p style="color:#7ed670"> End Date: {{item.END_TIME}}</p>
                                            <p style="color:#7ed670"> Task Time: {{item.TASK_TIME}}</p>
                                            <p style="color:#7ed670" *ngIf="item.UNIT_DESCRIPTION != null" style="white-space: normal;">Units: {{item.UNIT_DESCRIPTION}}</p>
                                        </div>
                                        <div *ngIf="item.STATUS != 4 && item.OVERDUE_TASK_COUNT == 0">
                                            <h2>{{ item.TITLE}} - {{item.SEQ_TEXT}}</h2>
                                            <p>{{item.CREATED_BY_NAME}}</p>
                                            <p *ngIf="item.TRANS_TYPE=='CALOG' && item.TRANS_ID > 0"> Call Log ID:
                                                {{item.TRANS_ID}}</p>
                                            <p> Start Date: {{item.START_TIME}}</p>
                                            <p> End Date: {{item.END_TIME}}</p>
                                            <p> Task Time: {{item.TASK_TIME}}</p>
                                        </div>

                                        <div *ngIf="item.OVERDUE_TASK_COUNT == 1">
                                            <h2 style="color:#ffa500">{{ item.TITLE}} - {{item.SEQ_TEXT}}</h2>
                                            <p style="color:#ffa500">{{item.CREATED_BY_NAME}}</p>
                                            <p style="color:#ffa500"
                                                *ngIf="item.TRANS_TYPE=='CALOG' && item.TRANS_ID > 0"> Call Log ID:
                                                {{item.TRANS_ID}}</p>
                                            <p style="color:#ffa500"> Start Date: {{item.START_TIME}}</p>
                                            <p style="color:#ffa500"> End Date: {{item.END_TIME}}</p>
                                            <p style="color:#ffa500"> Task Time: {{item.TASK_TIME}}</p>
                                        </div>

                                        <button ion-button clear item-end class="btn btn-link blc collapsed"
                                            data-toggle="collapse" [attr.data-target]="'#' + i"
                                            aria-expanded="true/false" [attr.aria-controls]="i">
                                            <ion-icon style="font-size: x-large;" name="arrow-dropdown"></ion-icon>
                                        </button>
                                    </ion-item>

                                    <!-- <ion-item-options side="left">
                                        <div *ngIf="item.TASK_TO_PIN == 0">
                                            <button ion-button style="font-size: 12px;"
                                                (click)="pintotask(item.TASK_ID,item.TASK_TO_PIN,type='Pin')"><img
                                                    src="assets/imgs/pin.png" class="icon-btn" /> Pin</button>
                                        </div>
                                        <div *ngIf="item.TASK_TO_PIN > 0">
                                            <button ion-button style="font-size: 12px;"
                                                (click)="pintotask(item.TASK_ID,item.TASK_TO_PIN,type='Unpin')"><img
                                                    src="assets/imgs/unpin.png" class="icon-btn" /> Unpin</button>
                                        </div>
                                    </ion-item-options> -->
                                </ion-item-sliding>
                            </ion-list>

                            <div [attr.id]="'undoBtn'+i" *ngIf="showBtn===i">
                                <div class="card-body card-bodynew">
                                    <table role="table" class="alltaskmodal">
                                        <thead role="rowgroup">
                                            <tr role="row">
                                                <th role="columnheader">Title</th>
                                                <th role="columnheader">Assignee</th>
                                                <th role="columnheader">Unit</th>
                                                <th role="columnheader">Start Date</th>
                                                <th role="columnheader">End Date</th>
                                                <th role="columnheader">Task Time</th>
                                                <th role="columnheader">Complaint</th>
                                                <th role="columnheader">Created Date</th>
                                                <th role="columnheader">Status</th>
                                                <th role="columnheader">Comments</th>
                                            </tr>
                                        </thead>
                                        <tbody role="rowgroup">
                                            <tr role="row">
                                                <td role="cell">{{item.TITLE}}</td>
                                                <td role="cell">{{item.ASSIGNED_TO}}</td>
                                                <td role="cell">item.UNIT_DESCRIPTION</td>
                                                <td role="cell">{{item.TASK_START_TIME |date:'dd-MMM-yyyy,hh:mm:ss a'}}
                                                </td>
                                                <td role="cell">{{item.TASK_END_TIME |date:'dd-MMM-yyyy,hh:mm:ss a'}}
                                                </td>
                                                <td role="cell">{{item.TASK_TIME}}</td>
                                                <td role="cell">{{item.COMPLAINT_DESCRIPTION}}</td>
                                                <td role="cell">{{item.CREATED_ON | date:'dd-MMM-yyyy,hh:mm a'}}</td>
                                                <td role="cell">{{item.STATUS_NAME}}</td>
                                                <td role="cell">
                                                    <span>
                                                        <span [innerHTML]="item.COMMENTS"
                                                            style='white-space: pre-line;'></span><br>
                                                        <span style="float: right; color: red">{{item.CMT_CREATED_BY}}
                                                            {{item.CMT_CREATED_ON | date:'dd-MMM-yyyy,HH:mm a'}} </span>
                                                    </span>
                                                </td>
                                                <td role="cell" style="padding-left: 0% !important;">

                                                    <span
                                                        *ngIf="(item.ASSIGNED_USER_INFO_ID == user.UserInfoId) && (item.STATUS <=2) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID,type='start')"
                                                            color="primary"><i class="fa fa-play" aria-hidden="true"
                                                                style="font-size: 11px;"> Start</i>
                                                        </button>
                                                    </span>
                                                    <span
                                                        *ngIf="(item.ASSIGNED_USER_INFO_ID == 0) && (item.STATUS <=2) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID,type='start')"
                                                            color="primary"><i class="fa fa-play" aria-hidden="true"
                                                                style="font-size: 11px;"> Start</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="(item.STATUS ==3) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID,type='pause')"
                                                            color="success">
                                                            <i class="fa fa-pause" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Pause</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="(item.STATUS ==3) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID,type='complete')"
                                                            color="success">
                                                            <i class="fa fa-check" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Completed</i>
                                                        </button>
                                                    </span>
                                                    <span *ngIf="item.TASK_FILE_COUNT == 0">
                                                        <button ion-button (click)="openModalTaskUpload(item.TASK_ID)"
                                                            color="secondary">
                                                            <i class="fa fa-paperclip" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Attach</i>
                                                        </button>
                                                    </span>
                                                    <span *ngIf="item.TASK_FILE_COUNT > 0">
                                                        <button ion-button (click)="openModalTaskUpload(item.TASK_ID)"
                                                            color="success">
                                                            <span style="margin-right: 15px; font-size: 11px;">
                                                                <img src="assets/imgs/attach.png" class="icon-btn"
                                                                    style="max-width: 45% !important" /> Attach
                                                            </span>
                                                        </button>
                                                    </span>
                                                    <span>
                                                        <button ion-button
                                                            (click)="opentaskcommentModal(item.TASK_ID,i)"
                                                            color="secondary"><i class="fa fa-comments"
                                                                aria-hidden="true" style="font-size: 11px;">
                                                                Comments</i>
                                                        </button>
                                                    </span>
                                                    
                                                    <span *ngIf="item.PARANT_COUNT > 0">
                                                        <button ion-button
                                                            (click)="openhierachy(item.SEQ_TEXT,item.TITLE)"
                                                            color="success">
                                                            <i class="fa fa-sitemap" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Task Hierarchy</i>
                                                        </button>
                                                    </span>
                                                    <span *ngIf="item.ACTIVITY_TASK_COUNT > 0">
                                                        <button ion-button (click)="markasread(item.TASK_ID)"
                                                            color="success">
                                                            <i class="fa fa-envelope-open-o"
                                                                style="font-size: 11px;width: 85px;"
                                                                aria-hidden="true">Mark as
                                                                Read</i>
                                                        </button>
                                                    </span>
                                                    

                                                    <!-- <span *ngIf="(item.STATUS ==4) && (item.REFTASK == 0)">
                                                        <button ion-button
                                                            (click)="update_task(item.TASK_ID, type='reopen')"
                                                            color="secondary"><i class="fa fa-undo" aria-hidden="true"
                                                                style="font-size: 11px;"> Reopen</i>
                                                        </button>
                                                    </span> -->

                                                    <span
                                                        *ngIf="(item.ASSIGNED_USER_INFO_ID != user.UserInfoId) && (item.STATUS <=2) && (item.REFTASK == 0)">
                                                        <button ion-button (click)="delete_task(item.TASK_ID)"
                                                            color="danger">
                                                            <i class="fa fa-trash" aria-hidden="true"
                                                                style="font-size: 11px;">
                                                                Delete</i>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.FLAG_COUNT == 0">
                                                        <button ion-button (click)="UpdateimportantTask(item.TASK_ID,1)"
                                                            color="secondary">
                                                            <ion-icon name="flag"></ion-icon>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.FLAG_COUNT == 1">
                                                        <button ion-button (click)="UpdateimportantTask(item.TASK_ID,0)"
                                                            color="danger">
                                                            <ion-icon name="flag"></ion-icon>
                                                        </button>
                                                    </span>

                                                    <span
                                                        *ngIf="item.THUBMSUP != 1 && (item.CREATED_BY == user.UserInfoId || item.REFERAL_USER_ID == 1)">
                                                        <button ion-button
                                                            (click)="UpdatethubmsTask(item.TASK_ID,1,item.ASSIGNED_USER_INFO_ID,item.CREATED_BY)"
                                                            color="secondary">
                                                            <ion-icon name="thumbs-up"></ion-icon>
                                                        </button>
                                                    </span>

                                                    <span *ngIf="item.REFTASK == 1">
                                                        <button ion-button (click)="openModalRemoveTask(item.TASK_ID)"
                                                            color="secondary">
                                                            <i class="fa fa-minus-circle" aria-hidden="true"
                                                                style="font-size: 11px;"> Remove Referal</i>
                                                        </button>
                                                    </span>

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </ion-list>

            <ion-list *ngSwitchCase="'feedback'">
                <!-- <ion-card (click)="completedfeedback()">
                    <ion-item>
                      <ion-icon name="paper" item-start large></ion-icon>
                      <p style="white-space: normal; font-size: 15px;">Task
                      </p>
                    </ion-item>  
                </ion-card> -->

                <div class="col-md-12">
                    <div class="accordion" id="accordionExample">
                        <div class="card" *ngFor="let item of Callprocurementvalue; index as i;">
                            <ion-row>
                                <ion-col>
                                    <ion-card class="dash_image" text-center (click)=opensubmittedfeedback(item)
                                        style="background: linear-gradient(90deg,#38e0c4,#7fb5ff) !important;">
                                        <ion-grid>
                                            <div>
                                                <h2>Task ID: {{ item.TASK_ID}}</h2>
                                                <h3>{{item.TITLE}} - {{item.SEQ_TEXT}}</h3>
                                                <p>{{item.CREATED_BY_NAME}}</p>
                                                <p>{{item.ASSIGNED_TO}}</p>
                                            </div>
                                        </ion-grid>
                                    </ion-card>
                                </ion-col>
                            </ion-row>
                        </div>
                    </div>
                </div>

            </ion-list>
        </div>

    </div>



</ion-content>