<!--
  Generated template for the SearchPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header >
        <ion-navbar style="background-color:#525b6d">
            
            <ion-title style="text-transform: capitalize;text-align: center"> HOTO </ion-title> 
            <ion-buttons end>
                <button ion-button (click)="goBack()">Close</button>
            </ion-buttons>
        </ion-navbar>
        <!-- <ion-toolbar>
            <ion-searchbar [(ngModel)]="searchData.search_value" (ionInput)="SearchhotoDetail()">
                </ion-searchbar>
          </ion-toolbar> -->
      </ion-header>
    <ion-content>
        <div class="col-md-12" *ngIf="isListShow == 0">
            <ion-card class="dash_image" text-center (click)="GetDataList('PPMMA')" >
                <ion-card-content>
                    <ion-item>
                        <ion-avatar item-start item-left class="list-time orange-border">
                            <img src="assets/imgs/homework.png">
                        </ion-avatar>
                        <h4>Pending PM Manager Approval </h4>
                        <ion-badge>{{ pendingPMApprovalData.length || '0'}}</ion-badge>
                        <!-- <i item-end class="fa fa-chevron-circle-right"></i> -->
                    </ion-item>
                </ion-card-content>
            </ion-card>
            <!--calls-->
            <ion-card class="dash_image" text-center (click)="GetDataList('PFMMA')">
                <ion-card-content>
                    <ion-item>
                        <ion-avatar item-start item-left class="list-time purple-border">
                            <img src="assets/imgs/homework.png">
                        </ion-avatar>
                        <h4>Pending FM Manager Approval</h4>
                        <ion-badge>{{ pendingFMApprovalData.length || '0'}}</ion-badge>
                        <!-- <i item-end class="fa fa-chevron-circle-right"></i> -->
                    </ion-item>
                </ion-card-content>
            </ion-card>
            <ion-card class="dash_image" text-center (click)="GetDataList('PUHOTOF')">
                <ion-card-content>
                    <ion-item>
                        <ion-avatar item-start item-left class="list-time orange-border">
                            <img src="assets/imgs/paper.png">
                        </ion-avatar>
                        <h4>Pending upload HO/TO form</h4>
                        <ion-badge>{{ pendingUploadHOTOFormData.length  || '0'}}</ion-badge>
                        <!-- <i item-end class="fa fa-chevron-circle-right"></i> -->
                    </ion-item>
                </ion-card-content>
            </ion-card>
            <ion-card class="dash_image" text-center (click)="GetDataList('PLTO')">
                <ion-card-content>
                    <ion-item>
                        <ion-avatar item-start item-left class="list-time purple-border">
                            <img src="assets/imgs/hoto.png">
                        </ion-avatar>
                        <h4>Pending Leasing Takeover</h4>
                        <ion-badge>{{ pendingForLeaseTOData.length  || '0'}}</ion-badge>
                        <!-- <i item-end class="fa fa-chevron-circle-right"></i> -->
                    </ion-item>
                </ion-card-content>
            </ion-card>
            <ion-card class="dash_image" text-center (click)="GetDataList('MWIP')">
                <ion-card-content>
                    <ion-item>
                        <ion-avatar item-start item-left class="list-time orange-border">
                            <img src="assets/imgs/setup.png">
                        </ion-avatar>
                        <h4>Maintenance Work in Progress</h4>
                        <ion-badge>{{ mainWorkInProgressData.length  || '0'}}</ion-badge>
                        <!-- <i item-end class="fa fa-chevron-circle-right"></i> -->
                    </ion-item>
                </ion-card-content>
            </ion-card>            
            <ion-card class="dash_image" text-center (click)="GetDataList('ESCTOCEO')">
                <ion-card-content>
                    <ion-item>
                        <ion-avatar item-start item-left class="list-time purple-border">
                            <img src="assets/imgs/escalation_icon.jpg">
                        </ion-avatar>
                        <h4> Escalation to CEO</h4>
                        <ion-badge>{{ escalationToCEOData.length  || '0'}}</ion-badge>
                        <!-- <i item-end class="fa fa-chevron-circle-right"></i> -->
                    </ion-item>
                </ion-card-content>
            </ion-card>
        </div>
        <div class="col-md-12" *ngIf="isListShow == 1">
            <div class="accordion" id="hoto">
                <div *ngFor="let item of listData; index as i;" >
                    <ion-item id="headingOne" style="background-color:white;" class="btn btn-link blc collapsed" style="margin-bottom: 2px;" data-toggle="collapse" [attr.data-target]= "'#' + i"
                    aria-expanded="true/false" [attr.aria-controls]="i">
                        <h2>Lease# :{{item.LEASE_NUMBER}}</h2>
                        <p style="float: left;" >{{leaseAppointmentStatus[item.APP_STATUS]}}</p>
                        <button ion-button clear item-end class="btn btn-link blc collapsed" data-toggle="collapse" [attr.data-target]= "'#' + i"
                        aria-expanded="true/false" [attr.aria-controls]="i"><ion-icon  style="font-size: x-large;" name="arrow-dropdown"></ion-icon></button>  
                    </ion-item> 
                    <div [attr.id]="i" class="collapse" aria-labelledby="headingOne" data-parent="#hoto">
                    <div class="card-body card-bodynew">
                    <table role="table" class="hoto">
                        <thead role="rowgroup">
                        <tr role="row">
                            <th role="columnheader">Lease Number</th>
                            <th role="columnheader">Unit</th>
                            <th role="columnheader">Tenant Name</th>
                            <th role="columnheader">Start Date</th>
                            <th role="columnheader">End Date</th>
                            <th role="columnheader">Appointment Date	</th>
                            <th role="columnheader">Status </th>
                            <th role="columnheader">App Building</th>
                            <th role="columnheader">App Type</th>
                            <th role="columnheader">Comments</th>
                        </tr>
                        </thead>
                        <tbody role="rowgroup">                
                            <tr role="row">
                                <td role="cell">{{item.LEASE_NUMBER}}</td>
                                <td role="cell">{{item.UNIT}}</td>
                                <td role="cell">{{item.TENANT_NAME}}</td>
                                <td role="cell">{{item.START_DATE|date:'dd-MMM-yyyy'}}</td>
                                <td role="cell">{{item.END_DATE |date:'dd-MMM-yyyy'}}</td>
                                <td role="cell">{{item.APPOINTMENT_DATE |date:'dd-MMM-yyyy'}}</td>
                                <td role="cell">{{item.APP_STATUS}}</td>
                                <td role="cell">{{item.BUILD_CODE}}</td>
                                <td role="cell">{{item.DOCUMENT_TYPE}}</td>
                                <td role="cell">
                                    <p>{{item.LDC_COMMENTS}}<br>
                                        <span style="color: red;">{{item.LDC_MODIFIED_DATE |date:'dd-MMM-yyyy,HH:mm a'}} by {{item.USER_SURNAME}}</span>
                                    </p>                                                                      
                                </td>
                                <td role="cell">
                                    <span *ngIf="(item.APP_STATUS_ID == 1 && resource_type_id == 14) || (item.APP_STATUS_ID == 3 && resource_type_id == 1)">
                                        <button ion-button
                                            (click)="UpdateAppointmentStatus(item.LEASE_NUMBER,item.ENABLE_STATUS,item.HANDOVER_ID, item)"
                                            color="secondary"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                        </button>
                                    </span>
                                    <!-- <span>
                                        <button ion-button color="secondary" (click)="openModal(item.LEASE_NUMBER,item.HANDOVER_ID)">
                                            <ion-icon name="chatbubbles"></ion-icon>
                                        </button>
                                    </span>
                                    <span>
                                        <button ion-button color="secondary" (click)="openAttachment(item.HANDOVER_ID,item.LEASE_NUMBER)"> 
                                            <i class="fa fa-paperclip" aria-hidden="true"></i>
                                        </button>
                                    </span> -->                                    
                                </td>
                            </tr>                
                        </tbody>
                    </table>
                </div>
                </div>
            </div>
            </div>
        </div>
    </ion-content>
          